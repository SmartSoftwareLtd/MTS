@{
    ViewBag.Title = "DashBoard";
}
<!-- Main content -->
<!-- fixer for small devices only -->
<div class="clearfix visible-sm-block"></div>

<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-yellow"><i class="fa fa-money"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">RECEIVEABLES</span>
            <span class="info-box-number" id="spnReceiveables"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->

<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-green"><i class="fa fa-calendar-check-o"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">LAST DAY SALES</span>
            <span class="info-box-number" id="spnLastDaySale"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->

<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-red"><i class="fa fa-cart-plus"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">Last Night Cash</span>
            <span class="info-box-number" id="spnCashBalLastNight"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->


<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-red"><i class="fa fa-line-chart"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">TOTAL CARS STOCK</span>
            <span class="info-box-number" id="spnTotalCarsStock"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->

<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-aqua"><i class="fa fa-history"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">TOTAL PENDING CARS</span>
            <span class="info-box-number" id="spnTotalPendingCars"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->

<div class="col-md-4 col-sm-6 col-xs-12">
    <div class="info-box">
        <span class="info-box-icon bg-yellow"><i class="fa fa-usd"></i></span>
        <div class="info-box-content">
            <span class="info-box-text">THIS MONTH SALES</span>
            <span class="info-box-text">Sales Amount:</span>
            <span class="info-box-number" id="spnThisMonthSales" style="margin-left: 130px;margin-top: -20px;"></span>
            <span class="info-box-text">No Of Sales:</span>
            <span class="info-box-number" id="spnThisMonthSalesCount" style="margin-left: 130px;margin-top: -20px;"></span>
        </div><!-- /.info-box-content -->
    </div><!-- /.info-box -->
</div><!-- /.col -->

<div class="row">
    <div class="col-md-12">
        <div class="box box-warning">
            <div class="box-header with-border">
                <h3 class="box-title">YARDS/SPACE</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <div class="btn-group">
                        <button class="btn btn-box-tool dropdown-toggle" data-toggle="dropdown"><i class="fa fa-wrench"></i></button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="row" id="divForAppendYard">
                   
                </div><!-- /.row -->
            </div><!-- ./box-body -->
            <!-- /.box-footer -->
        </div><!-- /.box -->
    </div><!-- /.col -->
</div><!-- /.row -->
<!-- Main row For Chart-->
@*<div class="row">
        <div class="col-md-12">
            <div class="box box-warning">
                <div class="box-header with-border">
                    <h3 class="box-title">Monthly Recap Report</h3>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        <div class="btn-group">
                            <button class="btn btn-box-tool dropdown-toggle" data-toggle="dropdown"><i class="fa fa-wrench"></i></button>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                            </ul>
                        </div>
                        <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div><!-- /.box-header -->
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-12">
                            <p class="text-center">
                                <strong id="lblGraphHeading">Sales: 1 Aug, 2016 - 30 Aug, 2016</strong>
                            </p>
                            <div class="chart" id="divChart">
                                <!-- Sales Chart Canvas -->
                                <canvas id="salesChart" style="height: 180px;"></canvas>
                            </div><!-- /.chart-responsive -->
                        </div><!-- /.col -->
                        <div class="col-md-4">
                                <p class="text-center">
                                    <strong>Goal Completion</strong>
                                </p>
                                <div class="progress-group">
                                    <span class="progress-text">Stores</span>
                                    <span class="progress-number"><b>160</b>/200</span>
                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-aqua" style="width: 80%"></div>
                                    </div>
                                </div><!-- /.progress-group -->
                                <div class="progress-group">
                                    <span class="progress-text">Employees</span>
                                    <span class="progress-number"><b>310</b>/400</span>
                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-red" style="width: 80%"></div>
                                    </div>
                                </div><!-- /.progress-group -->
                                <div class="progress-group">
                                    <span class="progress-text">Products</span>
                                    <span class="progress-number"><b>480</b>/800</span>
                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-green" style="width: 80%"></div>
                                    </div>
                                </div><!-- /.progress-group -->
                                <div class="progress-group">
                                    <span class="progress-text">Customers</span>
                                    <span class="progress-number"><b>250</b>/500</span>
                                    <div class="progress sm">
                                        <div class="progress-bar progress-bar-yellow" style="width: 80%"></div>
                                    </div>
                                </div><!-- /.progress-group -->
                            </div> <!--/.col -->
                    </div><!-- /.row -->
                </div><!-- ./box-body -->

            </div><!-- /.box -->
        </div><!-- /.col -->
    </div>*@
<!-- /.row -->
<!-- Main row -->
<div class="row">
    <!-- Left col -->
    <div class="col-md-4">
        <!-- TABLE: LATEST ORDERS -->
        <div class="box box-danger">
            <div class="box-header with-border">
                <h3 class="box-title">Top Ten A/R</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="table-responsive">
                    <table class="table no-margin">
                        <thead>
                            <tr>

                                <th>Customer Name</th>
                                <th>Amount Receiveable</th>
                                @*<th>Status</th>*@
                            </tr>
                        </thead>
                        <tbody id="tBodyForTopTenReceiveableCustomers"></tbody>
                    </table>
                </div><!-- /.table-responsive -->
            </div><!-- /.box-body -->
            <div class="box-footer clearfix">
                @*<a href="#" class="btn btn-sm btn-warning btn-flat pull-left">Add Order</a>*@

                @* <a href="@Url.Action("Index", "Sales")" class="btn btn-sm btn-warning btn-flat pull-right">View All Customers</a>*@
            </div><!-- /.box-footer -->
        </div><!-- /.box -->
    </div><!-- /.col -->
    <!-- Center col -->
    <div class="col-md-4">
        <!-- TABLE: LATEST ORDERS -->
        <div class="box box-success">
            <div class="box-header with-border">
                <h3 class="box-title">Top Ten Customers</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="table-responsive">
                    <table class="table no-margin">
                        <thead>
                            <tr>
                                @*<th>Invoice No</th>*@
                                <th>Customer Name</th>
                                @*<th>Status</th>*@
                            </tr>
                        </thead>
                        <tbody id="tBodyForTopTemCustomers">
                            @*<tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>
                                <tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>
                                <tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>
                                <tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>
                                <tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>
                                <tr>
                                    <td></td>
                                    <td>Order name</td>

                                </tr>*@
                        </tbody>
                    </table>
                </div><!-- /.table-responsive -->
            </div><!-- /.box-body -->
            <div class="box-footer clearfix">
                @*<a href="#" class="btn btn-sm btn-warning btn-flat pull-left">Add Order</a>*@

                <a href="@Url.Action("Index", "Sales")" class="btn btn-sm btn-warning btn-flat pull-right">View All Customers</a>
            </div><!-- /.box-footer -->
        </div><!-- /.box -->
    </div><!-- /.col -->
    <!-- Right col -->
    <div class="col-md-4 connectedSortable">
        <div class="box box-warning">
            <div class="box-header with-border">
                <h3 class="box-title">Suppliers and Stocks</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                    <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div class="box-body">
                <div class="table-responsive">
                    <table class="table no-margin">
                        <thead>
                            <tr>
                                <th>Suppliers</th>
                                <th>Stock</th>
                            </tr>
                        </thead>
                        <tbody id="tBodyForSuppliers"></tbody>
                    </table>
                </div><!-- /.table-responsive -->
            </div><!-- /.box-body -->
            <!-- /.box-footer -->
        </div>
    </div><!-- /.col -->

</div><!-- /.row -->


<script>

    //this action is used for update satatus in sales payment only
    //$(function () {

    //    $.ajax({
    //        contentType: 'application/json; charset=utf-8',
    //        dataType: 'json',
    //        type: 'GET',
    //        url: "/Home/TestForSalesPayment",
    //        //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
    //        success: function (data) {
    //            //debugger
    //            //$("#spnReceiveables").text(data);
    //        }
    //    });
    //});

    $(function () {

        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TotalReceiveableAmount",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnReceiveables").text(data);
            }
        });

        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/LastDaySale",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnLastDaySale").text(data);
            }
        });


        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/CashBalanceLastNight",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnCashBalLastNight").text(data);
            }
        });


        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/YardSpace",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                for (var i = 0; i < data.length; i++) {
                  

                     //if (data[i].strYardName == "A" || data[i].strYardName == "H" || data[i].strYardName == "K" ||
                     //    data[i].strYardName == "N" || data[i].strYardName == "Q" || data[i].strYardName == "X") {
                                 $("#divForAppendYard").append("<div class='col-md-3' style='padding-left: 50px;'>" + "<div class='progress-group'>"
                                     + "<span class='progress-text'>" + data[i].strYardName + "</span>" + " <span class='progress-number'><b>" + data[i].Count + "</b>/" + data[i].iYardLimit + "</span>" +
                                     "<div class='progress sm'>" + " <div class='progress-bar progress-bar-green' style='width: 80%'></div>" + "</div></div></div>");
                             //}
                   
                   
                   // if (data[i].strYardName == "A" || data[i].strYardName == "H" || data[i].strYardName == "K" ||
                   //     data[i].strYardName == "N" || data[i].strYardName == "Q" || data[i].strYardName == "X") {
                   //             $("#divForAppendYard").append("<div class='col-md-3' style='padding-left: 50px;'>" + "<div class='progress-group'>"
                   //                 + "<span class='progress-text'>" + data[i].strYardName + "</span>" + " <span class='progress-number'><b>" + data[i].Count + "</b>/300</span>" +
                   //                 "<div class='progress sm'>" + " <div class='progress-bar progress-bar-red' style='width: 80%'></div>" + "</div></div></div>");
                   //         }
                         
                   // else if (data[i].strYardName == "B" || data[i].strYardName == "E" || data[i].strYardName == "L" ||
                   //     data[i].strYardName == "O" || data[i].strYardName == "R" || data[i].strYardName == "U") {
                   //     $("#divForAppendYard").append("<div class='col-md-3' style='padding-left: 50px;'>" + "<div class='progress-group'>"
                   //         + "<span class='progress-text'>" + data[i].strYardName + "</span>" + " <span class='progress-number'><b>" + data[i].Count + "</b>/300</span>" +
                   //         "<div class='progress sm'>" + " <div class='progress-bar progress-bar-green' style='width: 80%'></div>" + "</div></div></div>");
                   // }
                   
                   // else if (data[i].strYardName == "C" || data[i].strYardName == "F" || data[i].strYardName == "I" ||
                   //     data[i].strYardName == "P" || data[i].strYardName == "S" || data[i].strYardName == "V" ||
                   //     data[i].strYardName == "Y" ) {
                   //    $("#divForAppendYard").append("<div class='col-md-3' style='padding-left: 50px;'>" + "<div class='progress-group'>"
                   //        + "<span class='progress-text'>" + data[i].strYardName + "</span>" + " <span class='progress-number'><b>" + data[i].Count + "</b>/300</span>" +
                   //        "<div class='progress sm'>" + " <div class='progress-bar progress-bar-aqua' style='width: 80%'></div>" + "</div></div></div>");
                   //}
                   // else if (data[i].strYardName == "D" || data[i].strYardName == "G" || data[i].strYardName == "J" ||
                   //     data[i].strYardName == "M" || data[i].strYardName == "T" || data[i].strYardName == "W"
                   //     || data[i].strYardName == "Z") {
                   //    $("#divForAppendYard").append("<div class='col-md-3' style='padding-left: 50px;'>" + "<div class='progress-group'>"
                   //        + "<span class='progress-text'>" + data[i].strYardName + "</span>" + " <span class='progress-number'><b>" + data[i].Count + "</b>/300</span>" +
                   //        "<div class='progress sm'>" + " <div class='progress-bar progress-bar-yellow' style='width: 80%'></div>" + "</div></div></div>");
                   // }


                }

            }
        });


        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TopCustomers",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
              
                for (var i = 0; i < data.length; i++) {
                    if (data[i].iCutomerTypeID==1)
                    {//+ "<td>" + data[i].strSalesInvoiceNo + "</td>" 
                        $("#tBodyForTopTemCustomers").append("<tr>" + "<td>" + data[i].ShowRoomCustomerName + "</td>" + "</tr>");
                    }
                    else if (data[i].iCutomerTypeID == 2) {
                        $("#tBodyForTopTemCustomers").append("<tr>" + "<td>" + data[i].CustomerFullName + "</td>" + "</tr>");

                    }
                }

            }
        });


        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TopSuppliersAndStocks",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                for (var i = 0; i < data.length; i++) {
                    $("#tBodyForSuppliers").append("<tr>" + "<td>" + data[i].strCompanyName + "</td>" + "<td>" + data[i].iVehicleID + "</td>" + "</tr>");

                }

            }
        });

        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TopTenReceiveableCustomers",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                debugger
                for (var i = 0; i < data.length; i++) {
                    if (data[i].iCutomerTypeID==1)
                    {
                        $("#tBodyForTopTenReceiveableCustomers").append("<tr>" + "<td>" + data[i].ShowRoomCustomerName +
                        "</td>" + "<td>" + data[i].dmlBalance + "</td>" + "</tr>");
                    }
                    else if (data[i].iCutomerTypeID == 2) {
                        $("#tBodyForTopTenReceiveableCustomers").append("<tr>" + "<td>" + data[i].CustomerFullName +
                       "</td>" + "<td>" + data[i].dmlBalance + "</td>" + "</tr>");
                    }
                   

                }

            }
        });

        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TotalCarsStock",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnTotalCarsStock").text(data);
            }
        });


        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/TotalPendingCars",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnTotalPendingCars").text(data);
            }
        });
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            type: 'GET',
            url: "/Home/ThisMonthSales",
            //data: JSON.stringify({ 'expense': arr, 'id': invoiceID }),
            success: function (data) {
                //debugger
                $("#spnThisMonthSales").text(data.ttlThisMonthSalesAmount);
                $("#spnThisMonthSalesCount").text(data.ttlThisMonthSalesCount);
            }
        });
    })
</script>



<script src="~/Content/dist/js/pages/dashboard2.js"></script>
